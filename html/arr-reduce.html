<script>
  const products = [
    { id: 1, price: 100 },
    { id: 2, price: 200 },
    { id: 3, price: 300 },
  ];

  // 프로퍼티 값을 합산
  const priceSum = products.reduce(function (pre, cur) {
    console.log(pre, cur.price);
    return pre + cur.price;
  }, 0);
  console.log(priceSum);

  console.clear();
  const sum = [].reduce(function (pre, cur) {
    console.log(pre, cur);
    return pre + cur;
  }, 0);
  console.log(sum);
  // TypeError: Reduce of empty array with no initial value

  // Array.prototype.some( 배열 내 일부 요소가 콜백 함수의 테스트를 통과하는 지 확인하여 그 결과를 boolean으로 반환 > 하나라도 통과하면 true 모두 통과하지 못하면 false)

  let res = [2, 5, 8, 1, 4].some(function (item) {
    return item > 10;
  });
  console.log(res);

  res = [12, 5, 9, 1, 4].some(function (item) {
    return item > 10;
  });
  console.log(res);

  // Array.prototype.every(배열 내 모든 요소가 콜백함수의 테스트를 통과하는지 확인하여 그 결과를 boolean으로 반환 > 모두 다 통과해야 true 하나라도 통과하지 못하면 false)

  res = [21, 15, 89, 1, 44].every(function (item) {
    return item > 10;
  });
  console.log(res);

  res = [21, 15, 89, 100, 44].every(function (item) {
    return item > 10;
  });
  console.log(res);

  const users = [
    { id: 1, name: 'Lee' },
    { id: 2, name: 'Kim' },
    { id: 2, name: 'Choi' },
    { id: 3, name: 'Park' },
  ];

  /* let result = users.find(function (item) {
    return item.id === 2;
  });

  console.log(result); */
  const abc = ['1', 2, 3, 4];
  console.dir(abc.toString());
  console.log(abc.toString());
  console.log(users.toString());
  console.log(users[0].toString.call(abc));
  console.log(abc.toString.call(abc[2]));

  function asdf() {}
  console.log(asdf.toString());
  // console.log('hi'.toString.call(abc));
  console.dir(String.prototype.toString);
  console.clear();
  Array.prototype.myFind = function (predicate) {
    // 첫번재 매개변수에 함수가 전달되었는지 확인
    if (!predicate || {}.toString.call(predicate) !== '[object Function]') {
      throw new TypeError(predicate + ' is not a function.');
    }

    /**
     * 배열 요소의 값, 요소 인덱스, 메소드를 호출한 배열, 즉 this를 매개변수를 통해 predicate에 전달하고
     * predicate를 호출하여 그 결과가 참인 요소를 반환하고 처리를 종료한다.
     */
    for (let i = 0, len = this.length; i < len; i++) {
      if (predicate(this[i], i, this)) return this[i];
    }
  };

  const result = users.myFind(function (item, index, array) {
    console.log(
      `[${index}]: ${JSON.stringify(item)} of [${JSON.stringify(array)}]`
    );
    return item.id === 2; // 요소의 id 프로퍼티의 값이 2인 요소를 검색
  });

  console.log(result); // { id: 2, name: 'Kim' }
</script>
